<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <title>dragTest</title>
  <style>
    body{
      margin: 0;
    }
    .div1, .div2{
      background: red;
      width: 100px;
      height: 50px;
    }
    .table{
      width: 200px;
      height: 200px;
      border: 1px solid #000;
      margin: 100px auto;
      position: relative;
    }
  </style>
</head>
<body>
  <button onclick="reset()">reset</button>
  <button onclick="stopDrag()">停止拖拽div1</button>
  <button onclick="continueDrag()">恢复拖拽div1</button>
  <button onclick="destroy()" style="width:1500px;">销毁拖拽div1</button>

  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <br>
  <div class="table">
    <div class="div1">div1</div>
  </div>
  <div class="div2" style="background: yellow;">div2</div>
  <br>
  <br>
  <br>

  <script src="../ddrag.js"></script>
  <script>
  // 解决在移动端拖拽DOM对象时页面上下滑动的问题
  document.addEventListener('touchmove', function (e) {
    e.preventDefault();
  })

  var div1 = new Ddrag({
    el: '.div1',
    cursor: 'pointer',
    marginLeft: '0',
    marginTop: '0',
    marginRight: '0',
    // marginRight: '-99999999',
    // marginBottom: '-99999999',
    afterDrag: function () {
      console.log(div1.top)
      console.log(div1.left)
    },
    draging: function (event) {
      // console.log(event)
    }
  })

  var div2 = new Ddrag({
    el: '.div2',
    left: 100,
    top: 100
  })

  function reset () {
    div1.set({
      left: 'center',
      top: 'middle',
      afterDrag: function (e) {
        console.log('afterDrag已改变')
        console.log(e)
      },
      draging: null
    })
  }

  function stopDrag () {
    div1.set({
      stop: true
    })
  }

  function continueDrag () {
    div1.set({
      stop: false
    })
  }

  function destroy () {
    div1.destroy(true)
  }
  </script>
</body>
</html>